# ADR-0001: Feature-Sliced Design + Keyset Pagination

## Status

Accepted

## Context

Pentru aplicația Vantage Lane Admin avem nevoie de:

1. Arhitectură scalabilă pentru echipe multiple
2. Granițe clare între module pentru mentenabilitate
3. Paginare eficientă pentru liste mari de date
4. Consistency în structura de cod

## Decision

### Arhitectură: Feature-Sliced Design (FSD)

Adoptăm Feature-Sliced Design cu următoarea structură:

```
/app        - Rute și pagini (Next.js)
/entities   - Entități de business
/features   - Funcționalități compuse
/shared     - Resurse partajate
```

**Dependency Rule**: `shared` ← `entities` ← `features` ← `app`

### Paginare: Keyset Pagination

Pentru toate listele cu >1000 items folosim keyset pagination:

```typescript
interface KeysetParams {
  limit: number;
  cursor?: string; // encoded (created_at, id)
  sort: 'desc' | 'asc';
}
```

**Standard sort**: `(created_at, id)` pentru consistency și performance.

## Consequences

### Positive

✅ **Scalabilitate**: echipele pot lucra independent pe features  
✅ **Mentenabilitate**: granițe clare, dependencies explicit  
✅ **Performance**: keyset pagination O(log n) vs offset O(n)  
✅ **Consistency**: același pattern pentru toate listele

### Negative

❌ **Learning curve**: echipa trebuie să învețe FSD principles  
❌ **Overhead initial**: mai mult setup pentru structure  
❌ **Keyset complexity**: mai complex decât offset pagination

### Mitigation

- **Training**: workshop FSD pentru echipă
- **Templates**: boilerplate pentru rapid prototyping
- **Documentation**: ghiduri clare pentru keyset implementation

## Implementation

### Phase 1: Structure Setup

- [x] Folder structure conform FSD
- [x] Frozen boundaries definite
- [x] CODEOWNERS pentru enforcement

### Phase 2: Keyset Implementation

- [ ] Shared pagination utilities
- [ ] Database indexes pentru (created_at, id)
- [ ] Frontend components pentru cursor management

### Phase 3: Team Onboarding

- [ ] FSD training sessions
- [ ] Code review guidelines
- [ ] Migration existing code

## References

- [Feature-Sliced Design](https://feature-sliced.design/)
- [Keyset Pagination](https://use-the-index-luke.com/no-offset)
- [Cursor Pagination Best Practices](https://relay.dev/graphql/connections.htm)
