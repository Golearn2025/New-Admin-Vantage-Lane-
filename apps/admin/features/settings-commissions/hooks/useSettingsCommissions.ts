'use client';
import{useState,useEffect}from'react';import type{OperatorCommission}from'../types';const mockOperators:OperatorCommission[]=[{operatorId:'1',operatorName:'Premium Transport Ltd',commissionPercent:10},{operatorId:'2',operatorName:'City Rides Co',commissionPercent:12}];export function useSettingsCommissions(){const[platformCommission,setPlatformCommission]=useState(15);const[operatorCommission,setOperatorCommission]=useState(10);const[operatorCommissions,setOperatorCommissions]=useState<OperatorCommission[]>([]);const[loading,setLoading]=useState(true);useEffect(()=>{const fetch=async()=>{setLoading(true);await new Promise(r=>setTimeout(r,300));setOperatorCommissions(mockOperators);setLoading(false)};fetch()},[]);const updatePlatformCommission=(value:number)=>setPlatformCommission(value);const updateOperatorCommission=(value:number)=>setOperatorCommission(value);const updateSpecificOperatorCommission=(operatorId:string,value:number)=>{setOperatorCommissions(prev=>prev.map(op=>op.operatorId===operatorId?{...op,commissionPercent:value}:op))};const saveChanges=async()=>{console.log('Saving:',{platformCommission,operatorCommission,operatorCommissions});await new Promise(r=>setTimeout(r,500));alert('âœ… Commissions saved!')};return{platformCommission,operatorCommission,operatorCommissions,loading,updatePlatformCommission,updateOperatorCommission,updateSpecificOperatorCommission,saveChanges}}
